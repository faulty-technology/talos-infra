global:
  cluster: talos-homelab
  customSecretName: newrelic-license-key # K8s secret created by Pulumi
  customSecretLicenseKey: licenseKey # key within that secret
  lowDataMode: true # reduces cardinality; ~40-60% less infra metric volume

newrelic-infrastructure:
  enabled: true
  privileged: true # required for node-level metrics; namespace is privileged PSS
  # Default requests are too high for a t3a.medium (94% memory requests at baseline).
  # Actual usage on a small homelab cluster is well below these values.
  controlPlane:
    resources:
      requests:
        cpu: 25m
        memory: 100Mi
      limits:
        memory: 150Mi
  ksm:
    ksm:
      resources:
        requests:
          cpu: 25m
          memory: 50Mi
        limits:
          memory: 100Mi
    forwarder:
      resources:
        requests:
          cpu: 25m
          memory: 50Mi
        limits:
          memory: 100Mi

nri-kube-events:
  enabled: true

nri-metadata-injection:
  enabled: true # enriches spans with k8s metadata when APM agents are added later

kube-state-metrics:
  enabled: true

newrelic-prometheus-agent:
  enabled: false # no in-cluster Prometheus to scrape

newrelic-logging:
  enabled: false # using existing Fluent Bit DaemonSet instead

nri-prometheus:
  enabled: false
